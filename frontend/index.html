<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Manager</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="notification-area"></div>

    <div class="container" id="auth-view">
        <h1>Menedżer Wydatków</h1>
        <div id="login-form">
            <h2>Logowanie</h2>
            <input type="text" id="login-username" placeholder="Nazwa użytkownika">
            <input type="password" id="login-password" placeholder="Hasło">
            <button onclick="login()">Zaloguj</button>
            <p>Nie masz konta? <a href="#" onclick="toggleAuth('register')">Zarejestruj się</a></p>
        </div>
        <div id="register-form" class="hidden">
            <h2>Rejestracja</h2>
            <input type="text" id="reg-username" placeholder="Nazwa użytkownika">
            <input type="password" id="reg-password" placeholder="Hasło">
            <button onclick="register()">Zarejestruj</button>
            <p>Masz już konto? <a href="#" onclick="toggleAuth('login')">Zaloguj się</a></p>
        </div>
    </div>

    <div class="container hidden" id="dashboard-view">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h1 id="welcome-msg">Dashboard</h1>
            <div class="header-actions">
                <button onclick="changePasswordPrompt()" style="width: auto;">Zmień Hasło</button>
                <button onclick="deleteAccount()" style="width: auto;" class="danger">Usuń Konto</button>
                <button onclick="logout()" style="width: auto;" class="secondary">Wyloguj</button>
            </div>
        </div>

        <div class="section">
            <h3>Dodaj Wydatek</h3>
            <input type="number" id="exp-amount" placeholder="Kwota" step="0.01">
            <input type="text" id="exp-desc" placeholder="Opis">
            <div>
                <label>Podziel z:</label>
                <div id="user-select-list" class="user-select-container">
                    <!-- Checkboxes will be populated here -->
                </div>
            </div>
            <button onclick="addExpense()">Dodaj Wydatek</button>
        </div>

        <div class="section">
            <div style="display: flex; justify-content: space-between; align-items: center; gap: 10px;">
                <div style="display: flex; gap: 10px; flex-grow: 1;">
                    <h3>Wydatki</h3>
                    <input type="text" id="search-input" placeholder="Szukaj..." oninput="debounceSearch()"
                        style="max-width: 200px;">
                </div>
                <button onclick="loadExpenses(document.getElementById('search-input').value)"
                    style="width: auto;">Odśwież</button>
            </div>
            <div id="expense-list">
                <!-- Expenses will be listed here -->
            </div>
        </div>

        <div class="section">
            <h3>Podsumowanie Długów</h3>
            <div id="debt-summary"></div>
        </div>
    </div>

    <div class="chat-container">
        <div class="chat-header" onclick="toggleChatBody()">Czat Grupowy</div>
        <div id="chat-body">
            <div class="chat-messages" id="chat-messages">
                <!-- Messages -->
            </div>
            <div class="chat-input-area">
                <input type="text" id="chat-input" placeholder="Wpisz wiadomość...">
                <button onclick="sendChat()">Wyślij</button>
            </div>
        </div>
    </div>

    <script src="app.js?v=6"></script>
</body>

</html>